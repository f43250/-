# 集合

   ![123](/静态资源/List和Map.png)

   ![1](https://github.com/f43250/study-notes/blob/master/%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/List%E5%92%8CMap.png)

   ![2](/study-notes/blob/master/%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/List%E5%92%8CMap.png)
   
## 一. Collection接口

  - Collection:
    - List: 有序可重复
      - ArrayList: 线程不安全,数组,查询时间复杂度o(1),支持快速随机访问(通过数组下标),每次扩容为原来的1.5倍
      - LinkedList: 线程不安全,双向链表,增删快.查询时间复杂度o(n)
      - Vector: 线程安全,每次扩容为原来的2倍
        - Stack: LIFO 
    - Set: 无序不可重复
      - HashSet: 内部HashMap保证不可重复
        - LinkedHashSet: 内部LinkedHashMap保证不可重复
      - TreeSet: 二叉树,自然排序或比较器排序
      - EnumSet: 专为枚举准备
    - Queue: FIFO

## 二. Map接口
  - Map:
    - HashMap: key不可重复的KV对,线程不安全,基于hash表
      - LinkedHashMap: HashMap+双向链表 插入或者访问排序
    - HashTable: 线程安全,基于hash表
    - IdentityHashMap: 允许容器以地址去重,而不是以hashcode
    - WeakHashMap: 弱引用 场景:线程安全的LRU缓存
    - EnumMap: 用于枚举
    - TreeMap:  基于红黑树,自然排序或比较器排序

- `1.null情况`
  - HashMap: key和value均可以为null,key为null时hashcode为0.
  - HashTable: key和value不能为null
  - CurrentHashMap: key和value不能为null
    - 原因: HashTable和CurrentHashMap支持并发,获取key出来为null不能分别是没有做过映射还是手动put的null值.

- `HashTable和CurrentHashMap为什么支持并发`
  - HashTable:所有方法被Synchronized修饰
  - CurrentHashMap:
    - JDK1.7:分段锁,Segment继承自ReentrantLock可以重入类
    - JDK1.8:CAS + Synchronized(延伸ABA问题)
  
